#!/usr/bin/env python
import time
import math
import mraa
import socket
import fcntl
import struct
import pyupm_i2clcd as lcd

PIRSensorin1,PIRSensorin2 = 5,8
inp1,inp2 = mraa.Gpio(PIRSensorin1),mraa.Gpio(PIRSen
inp.dir(mraa.DIR_IN)
c=0
 
def get_ip_address(ifname):
       
	s = socket.socket(socket.AD_INET, socket.SOCK_DGRAM)
	return socket.inet_ntoa(fcntl.ioctl(
		s.fileno(),
		0x8915, # SIOCGIFADDR
		struc.pack('256s', ifname[:15])
	)[20:24])

#initialize Jhd1313ml at 0x3E (LCD_ADDRESS AND 0x62 (RGB_ADDRESS))
myLcd = lcd.Jhd1313m1(0, 0x3E, 0x62)
#clear 
myLcd.clear()
#purple
myLcd.setColor(255,0,255)
#initialize cursor
myLcd.setCursor(0,0)

try:
  while(1):
    if(inp.read()):
      myLcd.clear()
      myLcd.setCursor(0,0)
      myLcd.write("Motion detected!")
      c +=1
      print(c)
    else:
      myLcd.write("Motion absent")
      c += 0
      print(c)
    time.sleep(1.0)

except KeyboardInterrupt:
  exit


